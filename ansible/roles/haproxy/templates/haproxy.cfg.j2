global
    log stdout format raw local0
    stats socket /var/run/haproxy.stat mode 660 level admin
    stats timeout 30s

defaults
    log global
    mode http
    option httplog
    option dontlognull
    timeout connect 5000
    timeout client  50000
    timeout server  50000

frontend http-in
    bind *:80
    # Exemple de ACL pour rediriger vers Jenkins
    acl is_jenkins hdr(host) -i jenkins.local
    use_backend jenkins_backend if is_jenkins

    # Backend par d√©faut (si rien ne match)
    default_backend stats_backend

backend jenkins_backend
    server jenkins_srv jenkins:8080 check

backend stats_backend
    stats enable
    stats uri /stats
    stats refresh 10s
    stats admin if LOCALHOST
